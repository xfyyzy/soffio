{% import "admin/macros/picker.html" as picker_macro %}

<section data-role="scope-picker">
  <header data-role="scope-picker-header">
    <h3 data-role="scope-picker-title">Scopes</h3>
    {% if picker.selected.is_empty() %}
    <span data-role="scope-picker-hint">Select permissions for this API key.</span>
    {% endif %}
  </header>
  <div data-role="scope-selected">
    <h4 data-role="scope-subtitle">Selected</h4>
    {% if picker.selected.is_empty() %}
    <p data-role="muted">No scopes selected</p>
    {% else %}
    <div data-role="scope-chip-list">
      {% for scope in picker.selected %}
      {% call picker_macro::chip(picker.toggle_action, "scope_state", picker.selected_values|join(","), "scope_id", scope.value, "scope", "true", scope.label, scope.value, "", "value", false, 0) %}
      {% endfor %}
    </div>
    {% endif %}
  </div>
  <div data-role="scope-options">
    <h4 data-role="scope-subtitle">Available</h4>
    {% if picker.available.is_empty() %}
    <p data-role="muted">All scopes selected</p>
    {% else %}
    <div data-role="scope-chip-grid">
      {% for scope in picker.available %}
      {% call picker_macro::chip(picker.toggle_action, "scope_state", picker.selected_values|join(","), "scope_id", scope.value, "scope", "false", scope.label, scope.value, "", "value", false, 0) %}
      {% endfor %}
    </div>
    {% endif %}
  </div>
</section>
