{% extends "admin/layouts/panel.html" %}

{% block panel_id %}api-key-editor{% endblock %}
{% block panel_heading %}{{ content.heading }}{% endblock %}

{% block panel_toolbar %}{% endblock panel_toolbar %}

{% block panel_controls %}{% endblock panel_controls %}

{% block panel_content %}
  {% let picker = content.scope_picker.clone() %}
  <form id="api-key-form" data-role="api-key-editor" method="post" action="{{ content.form_action }}"
        data-on-submit__prevent="(@post(`{{ content.form_action }}`, { contentType: 'form' }))">
    <label>
      <span>Name</span>
      <input type="text" name="name" value="{{ content.name }}" required>
    </label>
    <label>
      <span>Description</span>
      <textarea name="description" rows="3" placeholder="Optional purpose">{% if let Some(v) = &content.description %}{{ v }}{% endif %}</textarea>
    </label>
    {% include "admin/api_key_scope_selection_store.html" %}
  </form>
  {% include "admin/api_key_scope_picker.html" %}
  <div data-role="form-actions">
    <button type="submit" form="api-key-form">Save changes</button>
    <a href="/api-keys" data-role="button" data-variant="secondary">Back to API keys</a>
  </div>
{% endblock panel_content %}
