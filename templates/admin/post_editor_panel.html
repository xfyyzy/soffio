{% extends "admin/layouts/panel.html" %}

{% block panel_id %}post-editor{% endblock %}
{% block panel_heading %}{{ content.heading }}{% endblock %}

{% block panel_toolbar %}{% endblock panel_toolbar %}

{% block panel_content %}
    {% let picker = content.tag_picker.clone() %}
    <form id="post-editor-form" data-role="post-editor" method="post" action="{{ content.form_action }}"
      {% if content.enable_live_submit %}data-on-submit__prevent="(@post(`{{ content.form_action }}`, { contentType: 'form' }))"{% endif %}>
      <label>
        <span>Title</span>
        <input type="text" name="title" value="{{ content.title }}" required>
      </label>
      <label>
        <span>Excerpt</span>
        <textarea name="excerpt" rows="3" required>{{ content.excerpt }}</textarea>
      </label>
      <label>
        <span>Body Markdown</span>
        <textarea name="body_markdown" rows="12" required>{{ content.body_markdown }}</textarea>
      </label>
      <label>
        <span>Summary Markdown</span>
        <textarea name="summary_markdown" rows="6">{% if let Some(summary) = content.summary_markdown %}{{ summary }}{% endif %}</textarea>
      </label>
      <label>
        <span>Status</span>
        <select name="status">
          {% for option in content.status_options %}
          <option value="{{ option.value }}" {% if option.selected %}selected{% endif %}>{{ option.label }}</option>
          {% endfor %}
        </select>
      </label>
      {% include "admin/post_tag_selection_store.html" %}
    </form>
    {% include "admin/post_tag_picker.html" %}
    <div data-role="pin-toggle">
      <label for="post-pin-toggle">Pin to top of feeds</label>
      <input id="post-pin-toggle" type="checkbox" name="pinned" value="true" form="post-editor-form" {% if content.pinned %}checked{% endif %}>
    </div>
    <section data-role="metadata">
      <h3>Publication</h3>
      <p>
        <strong>Last Published:</strong>
        {% if let Some(time) = content.published_at %}
        {{ time }}
        {% else %}
        <span data-role="muted">â€”</span>
        {% endif %}
      </p>
    </section>
    <div data-role="form-actions">
      <button type="submit" form="post-editor-form">{{ content.submit_label }}</button>
    </div>
{% endblock panel_content %}
