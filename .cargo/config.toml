[build]
# Explicitly specify target to enable Cargo's "cross-compilation mode".
# This ensures rustflags only apply to target compilation, not build.rs / proc-macro.
target = "x86_64-unknown-linux-musl"

[target.x86_64-unknown-linux-musl]
# Use native optimization for local development, only applies to target compilation.
# CI/Release will override this via environment variables.
rustflags = ["-C", "target-cpu=native"]

[env]
# Use offline SQLx metadata during builds to avoid hitting a live DATABASE_URL in CI.
SQLX_OFFLINE = "true"

[profile.release]
split-debuginfo = "packed"
